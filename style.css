:root { --ui-bg:#000; --ui-fg:#e8e8e8; --ui-accent:#ffcc00; }
*{ box-sizing:border-box }

/* Base */
html,body{
  height:100%; margin:0; background:#000; color:var(--ui-fg);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
html, body, #game { touch-action: none; } /* anti scroll/zoom sur mobile */

/* Canvas 16:9 responsive centré */
#game{
  display:block; margin:0 auto;
  max-width:100vw; max-height:100vh;
  width:min(100vw, 100vh * 16 / 9);
  height:calc(min(100vw, 100vh * 16 / 9) * 9 / 16);
  image-rendering:pixelated; image-rendering:crisp-edges; outline:none;
}

/* HUD */
#hud{
  position:fixed; top:10px; left:50%; transform:translateX(-50%);
  display:flex; gap:24px; align-items:center; z-index:2; pointer-events:none;
  text-shadow:0 1px 2px #000; font-weight:600;
}
#score{ letter-spacing:.5px }
#scoreNum{ color:var(--ui-accent) }
#hint{ opacity:.75 }
#eggs{ opacity:.9 }


/* Empêche double-tap/pinch zoom sur tout ce qui capte le jeu */
html, body, #game,
.io-touch-half, .io-btn-img { touch-action: none; }



/* Gate / Title plein écran centré */
#gate{
  position:fixed; inset:0; display:grid; place-items:center;
  background:#000; z-index:3;
}
#gate .title{ position:absolute; inset:0; z-index:1; }
#gate .title img{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:contain; image-rendering:pixelated; pointer-events:none;
}

/* Titre 2 frames */
#title1{ animation:io83TitleA 1.1s steps(1) infinite; }
#title2{ animation:io83TitleB 1.1s steps(1) infinite; }
@keyframes io83TitleA { 0%,49%{opacity:1} 50%,100%{opacity:0} }
@keyframes io83TitleB { 0%,49%{opacity:0} 50%,100%{opacity:1} }

/* Sprite START (2 frames) */
#startSprite{
  position:absolute; left:50%;
  bottom:clamp(12px, 1.25vh, 24px);
  transform:translateX(-50%) scale(0.30);
  transform-origin:50% 100%;
  width:360px; height:360px;
  image-rendering:pixelated; cursor:pointer; user-select:none; z-index:9;
}
#startSprite img{ position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }
#start1{ animation:startSwapA 0.5s steps(1) infinite; }
#start2{ animation:startSwapB 0.5s steps(1) infinite; }
@keyframes startSwapA { 0%,49%{opacity:1} 50%,100%{opacity:0} }
@keyframes startSwapB { 0%,49%{opacity:0} 50%,100%{opacity:1} }

/* Sprite LOADING (masqué par défaut, affiché par JS gateUI) */
#loadingImg{
  position:absolute; right:24px; bottom:24px;
  width:200px; height:81px; image-rendering:pixelated;
  pointer-events:none; user-select:none; display:none; z-index:10;
}

/* Bouton HTML de secours toujours masqué */
#startBtn{ display:none !important; }

/* Indication Portrait */
#rotateHint{
  position:fixed; inset:0; display:none;
  align-items:center; justify-content:center;
  background:#000a; color:#fff; font:600 20px/1.2 system-ui; z-index:99999;
}

/* Verrou paysage : en portrait on masque jeu + gate + contrôles */
@media (orientation:portrait){
  #rotateHint{ display:flex }
  #game, #hud, #gate, #touchLeft, #touchRight, #btnJump, #btnAction{ display:none !important; }
}

/* Contrôles tactiles — cachés jusqu'au START + paysage */
@media (pointer:coarse){
  .io-touch-half{
    position:fixed; inset:0 auto 0 0; width:50vw;
    display:none;                  /* JS -> block après START en paysage */
    touch-action:none; pointer-events:none; z-index:5;
  }
  .io-touch-half.io-right{ left:auto; right:0; }

  .io-btn-img{
    position:fixed; z-index:50;
    display:none;                  /* JS -> block après START en paysage */
    pointer-events:none;           /* JS -> auto après START */
    width:clamp(72px,14vw,110px); height:auto;
    image-rendering: pixelated; user-select:none; -webkit-user-drag:none;
    transform-origin:center; transition:transform .05s linear, opacity .12s;
    opacity:.9;
  }
  .io-btn-img.pressed{ transform:scale(.92); opacity:.95; }

  .io-jump{
    left:calc(env(safe-area-inset-left) + 16px);
    bottom:calc(env(safe-area-inset-bottom) + 16px);
  }
  .io-action{
    left:calc(env(safe-area-inset-left) + 16px + clamp(72px,14vw,110px) + 14px);
    bottom:calc(env(safe-area-inset-bottom) + 28px);
    width:clamp(60px,12vw,96px);
  }
}

/* Accessibilité focus gate */
#gate:focus { outline: none; }
#gate:focus-visible { outline: 2px solid #6aa0ff; outline-offset: 2px; }
