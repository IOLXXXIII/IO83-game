<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover">
  <title>IO 83 – Myo Prototype</title>

  <!-- Preloads essentiels -->
  <link rel="preload" as="image" href="assets/background/bg_far.png">
  <link rel="preload" as="image" href="assets/background/bg_mid.png">
  <link rel="preload" as="image" href="assets/background/ground.png">
  <link rel="preload" as="image" href="assets/characters/myo/myo_idle_1.png">
  <link rel="preload" as="image" href="assets/characters/myo/myo_idle_2.png">
  <link rel="preload" as="image" href="assets/characters/myo/myo_walk_1.png">
  <link rel="preload" as="image" href="assets/characters/myo/myo_walk_2.png">
  <link rel="preload" as="image" href="assets/collectibles/wanted_withposter.png">
  <link rel="preload" as="image" href="assets/collectibles/wanted_withoutposter.png">
  <link rel="preload" as="image" href="assets/collectibles/all_complete.png">
  <link rel="preload" as="image" href="assets/collectibles/posters_complete.png">
  <link rel="preload" as="image" href="assets/ui/start/start_idle_1.png">
  <link rel="preload" as="image" href="assets/ui/start/start_idle_2.png">
  <link rel="preload" as="image" href="assets/ui/loading/loading_idle_1.png">
  <link rel="preload" as="image" href="assets/ui/loading/loading_idle_2.png">
  <link rel="preload" as="image" href="assets/ui/loading/loading_idle_3.png">
  <link rel="preload" as="image" href="assets/ui/loading/loading_idle_4.png">
  <link rel="preload" as="image" href="assets/ui/loading/loading_idle_5.png">

  <!-- FX: dash trail (8) -->
  <link rel="preload" as="image" href="assets/fx/dash_trail_1.png">
  <link rel="preload" as="image" href="assets/fx/dash_trail_2.png">
  <link rel="preload" as="image" href="assets/fx/dash_trail_3.png">
  <link rel="preload" as="image" href="assets/fx/dash_trail_4.png">
  <link rel="preload" as="image" href="assets/fx/dash_trail_5.png">
  <link rel="preload" as="image" href="assets/fx/dash_trail_6.png">
  <link rel="preload" as="image" href="assets/fx/dash_trail_7.png">
  <link rel="preload" as="image" href="assets/fx/dash_trail_8.png">

  <!-- FX: jump dust (16) -->
  <link rel="preload" as="image" href="assets/fx/jump_dust_1.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_2.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_3.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_4.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_5.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_6.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_7.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_8.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_9.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_10.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_11.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_12.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_13.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_14.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_15.png">
  <link rel="preload" as="image" href="assets/fx/jump_dust_16.png">

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Indication portrait (doit être hors du gate pour rester visible en portrait) -->
  <div id="rotateHint">Please rotate your device</div>

  <!-- HUD -->
  <div id="hud">
    <div id="score">Wanted: <span id="scoreNum">0</span></div>
    <div id="hint">← → move · ↑ jump (×2) · ↔↔ dash · ⬇ interact</div>
  </div>

  <!-- Écran titre (gate) -->
  <div id="gate" aria-modal="true" role="dialog"
       onclick="window.__IO83_START__ && window.__IO83_START__(event)"
       onkeydown="(event.key==='Enter'||event.key===' '||event.code==='Space') && window.__IO83_START__ && window.__IO83_START__(event)"
       tabindex="0">
    <div class="title">
      <img id="title1" src="assets/title/title_idle_1.png" alt="IO83 title" />
      <img id="title2" src="assets/title/title_idle_2.png" alt="" />
    </div>

    <!-- Sprite START -->
    <div id="startSprite">
      <img id="start1" src="assets/ui/start/start_idle_1.png" alt="" />
      <img id="start2" src="assets/ui/start/start_idle_2.png" alt="" />
    </div>

    <!-- Sprite LOADING -->
    <img id="loadingImg" src="assets/ui/loading/loading_idle_1.png" alt="">

    <!-- Bouton HTML de secours (masqué par CSS) -->
    <button id="startBtn" aria-label="Start game"
            onclick="window.__IO83_START__ && window.__IO83_START__(event)">START</button>
  </div>

  <!-- Canvas 16:9 -->
  <canvas id="game" width="1280" height="720" aria-label="IO83 Side Scroller"></canvas>

  <!-- AUDIO -->
  <audio id="bgm"        src="assets/audio/bgm_iogame.mp3" preload="auto" loop></audio>
  <audio id="sfxWanted"  src="assets/audio/sfx_wanted.mp3" preload="auto"></audio>
  <audio id="sfxDash"    src="assets/audio/sfx_dash.mp3" preload="auto"></audio>
  <audio id="sfxEnter"   src="assets/audio/sfx_enter.mp3" preload="auto"></audio>
  <audio id="sfxExit"    src="assets/audio/sfx_exit.mp3" preload="auto"></audio>
  <audio id="sfxJump"    src="assets/audio/sfx_jump.mp3" preload="auto"></audio>
  <audio id="sfxType"    src="assets/audio/sfx_terminal_type.mp3" preload="auto"></audio>
  <audio id="sfxDing"    src="assets/audio/sfx_terminal_ding.mp3" preload="auto"></audio>
  <audio id="sfxFoot"    src="assets/audio/sfx_footsteps_loop.mp3" preload="auto" loop></audio>
  <audio id="sfxGetOut"  src="assets/audio/sfx_getout.mp3" preload="auto"></audio>
  <audio id="sfxPostersComplete" src="assets/audio/sfx_posters_complete.mp3" preload="auto"></audio>
  <audio id="sfxDoorLocked" src="assets/audio/sfx_door_locked.mp3" preload="auto"></audio>

  <!-- Zones tactiles invisibles + boutons PNG (affichés après START en paysage) -->
  <div id="touchLeft"  class="io-touch-half" aria-hidden="true"></div>
  <div id="touchRight" class="io-touch-half io-right" aria-hidden="true"></div>
  <img id="btnJump"   class="io-btn-img io-jump"   alt="Jump"   src="assets/ui/mobile/btn_jump.png">
  <img id="btnAction" class="io-btn-img io-action" alt="Action" src="assets/ui/mobile/btn_action.png">

  <script src="main.js" defer></script>
</body>
</html>
